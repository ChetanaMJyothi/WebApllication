<html>
    <head>
        <title>
            Welcome to Invoice generator
        </title>
        <link rel="stylesheet" href="second.css">
        <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=Kaushan+Script&display=swap" rel="stylesheet">
    </head>

<body onload="myFunction()">
<section id="banner">
    <div class="banner-text">
        <h1>Invoice Generator</h1>
    </div>
<div class="upload-file">

<input type="file" class="upload-box" id="myFile" multiple size="50" onchange="myFunction()">
    <p id="demo"></p>
<script type="text/javascript">
    function myFunction() {
        var fileUpload = document.getElementById("myFile");
        var regex = /^([a-zA-Z0-9\s_\\.\-:])+(.csv|.txt)$/;
        if (regex.test(fileUpload.value.toLowerCase())) {
            if (typeof (FileReader) != "undefined") {
                var reader = new FileReader();
                reader.onload = function (e) {
                    var table = document.createElement("table");
                    var rows = e.target.result.split("\n");
                    var k=0;
                    var c=0;
                    for (var i = 0; i < rows.length; i++) {
                        var cells = rows[i].split(",");
                        if (cells.length > 1) {
                            var row = table.insertRow(-1);
                            for (var j = 0; j < cells.length; j++) {
                                if(!cells[0].localeCompare('H')){
                                if(j==2 ){
                                var cell = row.insertCell(-1);
                                cell.innerHTML = "Invoice Number:   "+cells[j];}
                                if(j==3){
                                var cell = row.insertCell(-1);
                                cell.innerHTML = "Invoice Date:   "+cells[j];}
                                }
                                if(!cells[0].localeCompare('T')){
                                    if(j==5){
                                    var cell = row.insertCell(-1);
                                    cell.innerHTML = cells[j]+cells[j+1];}
                                    if(j==14){
                                    var cell = row.insertCell(-1);
                                    k=cell.innerHTML = cells[j]*cells[20]; 
                                    c=c+k;
                                    }
                                }
                                }
                            }
                        }
                    var dvCSV = document.getElementById("dvCSV");
                    
                    dvCSV.innerHTML = "";
                    dvCSV.appendChild(table);
                    document.getElementById("ccc").innerHTML="Total value: "+c;
                }
                reader.readAsText(fileUpload.files[0]);
            } 
        } 
    }
</script>
<!--<input type="file" id="fileUpload" />
<input type="button" id="upload" value="Upload" onclick="Upload()" />-->
<hr />
<div id="dvCSV">
</div>
<div id="ccc">
    </div>


</div>
</section>
</body>
</html>